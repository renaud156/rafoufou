<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Réserver votre stage - Tennis Impact Academy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      body.reservation-page {
        --reservation-night: #050916;
        --reservation-deep: #0b1630;
        --reservation-surface: rgba(14, 28, 52, 0.82);
        --reservation-gold: #f5c451;
        --reservation-gold-strong: #f0ad2c;
        --reservation-muted: rgba(223, 230, 255, 0.75);
        --reservation-contrast: #f7f8ff;
        --reservation-border: rgba(255, 255, 255, 0.12);
        --reservation-shadow: 0 32px 80px rgba(2, 10, 32, 0.45);
        --reservation-radius-lg: 28px;
        --reservation-radius-md: 20px;
        --reservation-radius-sm: 14px;
        margin: 0;
        font-family: "Poppins", "Segoe UI", sans-serif;
        background: radial-gradient(circle at 12% 18%, rgba(67, 95, 255, 0.16), transparent 55%),
          linear-gradient(160deg, var(--reservation-night) 0%, #020714 45%, #030a1b 100%);
        color: var(--reservation-contrast);
        line-height: 1.7;
        min-height: 100vh;
        scroll-padding-top: 120px;
      }

      .reservation-page * {
        box-sizing: border-box;
      }

      a {
        color: inherit;
      }

      a:hover,
      a:focus-visible {
        color: var(--reservation-gold);
      }

      .reservation-container {
        width: min(1180px, 94vw);
        margin: 0 auto;
      }

      .reservation-navbar {
        position: fixed;
        inset: 0 0 auto 0;
        z-index: 80;
        backdrop-filter: blur(22px);
        background: linear-gradient(120deg, rgba(4, 10, 24, 0.95), rgba(8, 18, 40, 0.9));
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }

      .reservation-navbar__inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 24px;
        padding: 20px 0;
      }

      .reservation-navbar__brand {
        display: flex;
        flex-direction: column;
        gap: 2px;
        font-weight: 600;
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }

      .reservation-navbar__brand span:first-child {
        font-size: 0.65rem;
        color: var(--reservation-muted);
      }

      .reservation-navbar__brand span:last-child {
        font-family: "Playfair Display", serif;
        font-size: 1.35rem;
      }

      .reservation-navbar__toggle {
        display: none;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        background: rgba(255, 255, 255, 0.04);
        color: inherit;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .reservation-navbar__toggle:hover,
      .reservation-navbar__toggle:focus-visible {
        background: rgba(255, 255, 255, 0.1);
      }

      .reservation-navbar__menu {
        display: flex;
        align-items: center;
        gap: 18px;
      }

      .reservation-navbar__menu a {
        font-size: 0.95rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        padding: 10px 14px;
        border-radius: 999px;
        transition: background 0.3s ease, color 0.3s ease;
      }

      .reservation-navbar__menu a:hover,
      .reservation-navbar__menu a:focus-visible {
        background: rgba(255, 255, 255, 0.12);
      }

      .reservation-navbar__cta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 20px;
        border-radius: 999px;
        background: linear-gradient(135deg, var(--reservation-gold), var(--reservation-gold-strong));
        color: #061126;
        font-weight: 600;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .reservation-navbar__cta:hover,
      .reservation-navbar__cta:focus-visible {
        transform: translateY(-2px);
        box-shadow: 0 18px 50px rgba(10, 20, 48, 0.5);
      }

      .reservation-navbar__mobile {
        display: none;
        position: absolute;
        inset: 100% 0 auto;
        padding: 24px 0 28px;
        background: linear-gradient(150deg, rgba(6, 16, 38, 0.98), rgba(5, 14, 34, 0.98));
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 20px 40px rgba(2, 10, 30, 0.45);
      }

      .reservation-navbar__mobile a {
        display: block;
        padding: 14px 0;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }

      .reservation-navbar__mobile a:last-child {
        border-bottom: 0;
      }

      .reservation-hero {
        position: relative;
        padding: clamp(140px, 18vw, 180px) 0 120px;
        background: linear-gradient(140deg, rgba(6, 14, 32, 0.88), rgba(8, 20, 46, 0.82)),
          url("assets/photos/3.png") center/cover;
        overflow: hidden;
      }

      .reservation-hero::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(140deg, rgba(3, 9, 24, 0.9), rgba(6, 16, 38, 0.7));
        z-index: 0;
      }

      .reservation-hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 22% 20%, rgba(245, 196, 81, 0.18), transparent 45%),
          radial-gradient(circle at 78% 30%, rgba(82, 122, 255, 0.2), transparent 60%);
        mix-blend-mode: screen;
        opacity: 0.8;
      }

      .reservation-hero__inner {
        position: relative;
        z-index: 1;
        display: grid;
        gap: clamp(36px, 5vw, 48px);
        max-width: 980px;
      }

      .reservation-hero__badge {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        padding: 10px 18px;
        border-radius: 999px;
        border: 1px solid rgba(245, 196, 81, 0.35);
        background: rgba(245, 196, 81, 0.12);
        color: var(--reservation-gold);
        letter-spacing: 0.38em;
        text-transform: uppercase;
        font-size: 0.72rem;
      }

      .reservation-hero__badge::before {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: currentColor;
      }

      .reservation-hero h1 {
        font-family: "Playfair Display", serif;
        font-size: clamp(3rem, 4.6vw, 4.8rem);
        letter-spacing: -0.01em;
        margin: 0;
      }

      .reservation-hero p {
        margin: 0;
        color: var(--reservation-muted);
        font-size: clamp(1.05rem, 1.4vw, 1.3rem);
        max-width: 720px;
      }

      .reservation-hero__cta {
        display: flex;
        flex-wrap: wrap;
        gap: 18px;
      }

      .reservation-button {
        --btn-bg: rgba(255, 255, 255, 0.06);
        --btn-color: var(--reservation-contrast);
        --btn-border: rgba(255, 255, 255, 0.18);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 14px 26px;
        border-radius: 999px;
        border: 1px solid var(--btn-border);
        background: var(--btn-bg);
        color: var(--btn-color);
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      }

      .reservation-button:hover,
      .reservation-button:focus-visible {
        transform: translateY(-2px);
        box-shadow: 0 16px 48px rgba(5, 14, 36, 0.5);
      }

      .reservation-button--primary {
        --btn-bg: linear-gradient(135deg, var(--reservation-gold), var(--reservation-gold-strong));
        --btn-color: #061021;
        --btn-border: transparent;
      }

      .reservation-hero__stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
      }

      .reservation-hero__stat {
        padding: 20px 22px;
        border-radius: var(--reservation-radius-md);
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
      }

      .reservation-hero__stat strong {
        display: block;
        font-family: "Playfair Display", serif;
        font-size: clamp(1.6rem, 2vw, 2.2rem);
        color: var(--reservation-gold);
      }

      .reservation-hero__stat span {
        color: var(--reservation-muted);
        font-size: 0.92rem;
      }

      .reservation-body {
        position: relative;
        display: grid;
        gap: 36px;
        margin: -80px auto 120px;
      }

      @media (min-width: 1100px) {
        .reservation-body {
          grid-template-columns: minmax(0, 1fr) minmax(320px, 360px);
          align-items: start;
        }
      }

      .reservation-section {
        position: relative;
        margin-bottom: 72px;
        padding: clamp(42px, 5vw, 54px);
        border-radius: var(--reservation-radius-lg);
        background: rgba(8, 18, 42, 0.78);
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow: var(--reservation-shadow);
        overflow: hidden;
      }

      .reservation-section::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        mix-blend-mode: screen;
        opacity: 0.4;
        background: radial-gradient(circle at 18% 18%, rgba(245, 196, 81, 0.12), transparent 52%),
          radial-gradient(circle at 82% 24%, rgba(88, 128, 255, 0.12), transparent 60%);
      }

      .reservation-section > * {
        position: relative;
        z-index: 1;
      }

      .reservation-section__eyebrow {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        letter-spacing: 0.32em;
        text-transform: uppercase;
        color: var(--reservation-gold);
        font-size: 0.78rem;
        margin-bottom: 18px;
      }

      .reservation-section__eyebrow::before,
      .reservation-section__eyebrow::after {
        content: "";
        width: 48px;
        height: 1px;
        background: rgba(245, 196, 81, 0.35);
      }

      .reservation-section h2 {
        font-family: "Playfair Display", serif;
        font-size: clamp(2.1rem, 2.7vw, 3rem);
        margin: 12px 0 16px;
      }

      .reservation-section p {
        margin: 0;
        color: var(--reservation-muted);
      }

      .calendar-shell {
        display: grid;
        gap: 32px;
      }

      @media (min-width: 920px) {
        .calendar-shell {
          grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
          align-items: start;
        }
      }

      .calendar-card {
        border-radius: var(--reservation-radius-md);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(6, 14, 32, 0.7);
        padding: 26px;
      }

      .calendar-nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 18px;
      }

      .calendar-nav__button {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.05);
        color: inherit;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .calendar-nav__button:hover,
      .calendar-nav__button:focus-visible {
        background: rgba(255, 255, 255, 0.1);
      }

      .calendar-nav__label {
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
      }

      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 8px;
      }

      .calendar-grid__dayname {
        text-align: center;
        font-size: 0.75rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: rgba(223, 230, 255, 0.55);
        padding-bottom: 8px;
      }

      .calendar-day {
        min-height: 68px;
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: rgba(255, 255, 255, 0.04);
        padding: 12px 10px;
        display: grid;
        align-content: start;
        gap: 6px;
        font-size: 0.92rem;
        cursor: default;
      }

      .calendar-day--empty {
        border: none;
        background: transparent;
      }

      .calendar-day__number {
        font-weight: 600;
        color: rgba(255, 255, 255, 0.75);
      }

      .calendar-day__stage {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        border-radius: 999px;
        padding: 4px 10px;
        background: rgba(245, 196, 81, 0.14);
        color: var(--reservation-gold);
      }

      .calendar-day--selectable {
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .calendar-day--selectable:hover,
      .calendar-day--selectable:focus-visible {
        transform: translateY(-2px);
        box-shadow: 0 16px 40px rgba(8, 20, 46, 0.4);
      }

      .calendar-day--active {
        border-color: rgba(245, 196, 81, 0.6);
        box-shadow: 0 0 0 1px rgba(245, 196, 81, 0.35), 0 20px 48px rgba(6, 16, 40, 0.4);
      }

      .calendar-details {
        border-radius: var(--reservation-radius-md);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.04);
        padding: 32px;
        display: grid;
        gap: 18px;
      }

      .calendar-details__badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 14px;
        border-radius: 999px;
        background: rgba(245, 196, 81, 0.14);
        color: var(--reservation-gold);
        letter-spacing: 0.2em;
        text-transform: uppercase;
        font-size: 0.72rem;
      }

      .calendar-details h3 {
        font-family: "Playfair Display", serif;
        font-size: 1.8rem;
        margin: 0;
      }

      .calendar-details__meta {
        display: grid;
        gap: 8px;
        font-size: 0.95rem;
        color: var(--reservation-muted);
      }

      .calendar-details__meta strong {
        color: var(--reservation-contrast);
      }

      .calendar-details__features {
        display: grid;
        gap: 8px;
        padding: 0;
        margin: 0;
        list-style: none;
      }

      .calendar-details__features li::before {
        content: "•";
        color: var(--reservation-gold);
        margin-right: 10px;
      }

      .stage-grid {
        display: grid;
        gap: 28px;
      }

      @media (min-width: 840px) {
        .stage-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .stage-card {
        border-radius: var(--reservation-radius-md);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(6, 16, 36, 0.72);
        padding: 28px;
        display: grid;
        gap: 18px;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .stage-card:hover,
      .stage-card:focus-within {
        transform: translateY(-6px);
        box-shadow: 0 24px 60px rgba(8, 20, 46, 0.5);
      }

      .stage-card__header {
        display: grid;
        gap: 6px;
      }

      .stage-card__eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.22em;
        font-size: 0.72rem;
        color: rgba(223, 230, 255, 0.7);
      }

      .stage-card h3 {
        margin: 0;
        font-family: "Playfair Display", serif;
        font-size: 1.6rem;
      }

      .stage-card__price {
        font-size: 1.05rem;
        color: var(--reservation-gold);
        font-weight: 600;
      }

      .stage-card__meta {
        display: grid;
        gap: 8px;
        font-size: 0.95rem;
        color: var(--reservation-muted);
      }

      .stage-card__features {
        margin: 0;
        padding: 0;
        list-style: none;
        display: grid;
        gap: 6px;
      }

      .stage-card__features li::before {
        content: "⁘";
        color: var(--reservation-gold);
        margin-right: 8px;
      }

      .stage-card__actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .reservation-cart {
        position: relative;
        border-radius: var(--reservation-radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: linear-gradient(165deg, rgba(8, 18, 42, 0.92), rgba(4, 12, 30, 0.9));
        box-shadow: var(--reservation-shadow);
        padding: clamp(32px, 5vw, 42px);
        display: grid;
        gap: 24px;
      }

      @media (min-width: 1100px) {
        .reservation-cart {
          position: sticky;
          top: 120px;
        }
      }

      .reservation-cart__header {
        display: grid;
        gap: 8px;
      }

      .reservation-cart__header span {
        letter-spacing: 0.3em;
        text-transform: uppercase;
        font-size: 0.72rem;
        color: rgba(223, 230, 255, 0.7);
      }

      .reservation-cart__header h3 {
        margin: 0;
        font-family: "Playfair Display", serif;
        font-size: 1.9rem;
      }

      .reservation-cart__items {
        display: grid;
        gap: 18px;
      }

      .cart-item {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.05);
        padding: 18px;
        display: grid;
        gap: 12px;
      }

      .cart-item__header {
        display: flex;
        justify-content: space-between;
        gap: 12px;
      }

      .cart-item__header strong {
        font-family: "Playfair Display", serif;
        font-size: 1.1rem;
      }

      .cart-item__remove {
        background: none;
        border: 0;
        color: rgba(223, 230, 255, 0.65);
        cursor: pointer;
        font-size: 0.85rem;
        letter-spacing: 0.14em;
        text-transform: uppercase;
      }

      .cart-item__remove:hover,
      .cart-item__remove:focus-visible {
        color: var(--reservation-gold);
      }

      .cart-item__meta {
        font-size: 0.88rem;
        color: var(--reservation-muted);
        display: grid;
        gap: 4px;
      }

      .cart-item__controls {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .cart-item__quantity {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.05);
        padding: 6px 12px;
      }

      .cart-item__quantity button {
        width: 26px;
        height: 26px;
        border-radius: 50%;
        border: 0;
        background: rgba(245, 196, 81, 0.18);
        color: var(--reservation-gold);
        cursor: pointer;
      }

      .cart-item__options {
        display: grid;
        gap: 8px;
        font-size: 0.9rem;
        color: var(--reservation-muted);
      }

      .cart-item__options label {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
      }

      .cart-item__price {
        text-align: right;
        font-weight: 600;
        color: var(--reservation-gold);
      }

      .reservation-cart__empty {
        border-radius: var(--reservation-radius-sm);
        border: 1px dashed rgba(255, 255, 255, 0.18);
        padding: 24px;
        text-align: center;
        color: var(--reservation-muted);
      }

      .reservation-cart__total {
        border-top: 1px solid rgba(255, 255, 255, 0.12);
        padding-top: 18px;
        display: grid;
        gap: 6px;
        font-size: 0.95rem;
      }

      .reservation-cart__total strong {
        font-size: 1.2rem;
        color: var(--reservation-gold);
      }

      .reservation-cart__fineprint {
        font-size: 0.8rem;
        color: rgba(223, 230, 255, 0.6);
      }

      .reservation-pillars {
        display: grid;
        gap: 18px;
        margin-top: 28px;
      }

      .reservation-pillar {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.05);
        padding: 20px 24px;
        display: grid;
        gap: 10px;
      }

      .reservation-destinations {
        display: grid;
        gap: 18px;
        margin-top: 28px;
      }

      @media (min-width: 760px) {
        .reservation-destinations {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }

      .reservation-destination {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(6, 16, 36, 0.72);
        padding: 22px;
        display: grid;
        gap: 8px;
      }

      .reservation-options {
        display: grid;
        gap: 18px;
        margin-top: 28px;
      }

      @media (min-width: 760px) {
        .reservation-options {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .reservation-option {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.05);
        padding: 22px;
        display: grid;
        gap: 6px;
      }

      .reservation-option strong {
        color: var(--reservation-contrast);
      }

      .reservation-faq {
        display: grid;
        gap: 18px;
        margin-top: 28px;
      }

      .reservation-faq__item {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(6, 14, 32, 0.75);
        padding: 22px;
        display: grid;
        gap: 8px;
      }

      .reservation-faq__item h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .reservation-toast {
        position: fixed;
        inset: auto 50% 32px auto;
        transform: translateX(50%);
        display: none;
        align-items: center;
        gap: 14px;
        padding: 16px 22px;
        border-radius: 999px;
        background: rgba(245, 196, 81, 0.16);
        border: 1px solid rgba(245, 196, 81, 0.4);
        color: var(--reservation-gold);
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        box-shadow: 0 20px 50px rgba(5, 12, 28, 0.4);
        z-index: 100;
      }

      .reservation-toast[data-active="true"] {
        display: inline-flex;
        animation: toast-in 0.4s ease;
      }

      @keyframes toast-in {
        from {
          opacity: 0;
          transform: translateX(50%) translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateX(50%) translateY(0);
        }
      }

      .reservation-modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 120;
      }

      .reservation-modal[data-open="true"] {
        display: flex;
      }

      .reservation-modal__overlay {
        position: absolute;
        inset: 0;
        background: rgba(2, 8, 22, 0.8);
        backdrop-filter: blur(6px);
      }

      .reservation-modal__dialog {
        position: relative;
        z-index: 1;
        width: min(720px, 92vw);
        border-radius: var(--reservation-radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: linear-gradient(150deg, rgba(6, 16, 36, 0.96), rgba(3, 9, 22, 0.96));
        box-shadow: var(--reservation-shadow);
        padding: clamp(32px, 6vw, 48px);
        display: grid;
        gap: 24px;
      }

      .reservation-modal__close {
        position: absolute;
        inset: 22px 22px auto auto;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 0;
        background: rgba(255, 255, 255, 0.08);
        color: inherit;
        cursor: pointer;
      }

      .reservation-modal h2 {
        margin: 0;
        font-family: "Playfair Display", serif;
        font-size: clamp(1.9rem, 2.6vw, 2.4rem);
      }

      .reservation-modal__summary {
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.05);
        padding: 20px 22px;
        display: grid;
        gap: 8px;
        font-size: 0.92rem;
      }

      .reservation-modal__summary strong {
        font-family: "Playfair Display", serif;
        color: var(--reservation-gold);
      }

      .reservation-form {
        display: grid;
        gap: 18px;
      }

      .reservation-form__group {
        display: grid;
        gap: 6px;
      }

      .reservation-form label {
        font-size: 0.82rem;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: rgba(223, 230, 255, 0.7);
      }

      .reservation-form input,
      .reservation-form select,
      .reservation-form textarea {
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        background: rgba(255, 255, 255, 0.04);
        color: inherit;
        padding: 14px 16px;
        font: inherit;
        transition: border 0.3s ease;
      }

      .reservation-form input:focus-visible,
      .reservation-form select:focus-visible,
      .reservation-form textarea:focus-visible {
        outline: none;
        border-color: rgba(245, 196, 81, 0.6);
      }

      .reservation-form textarea {
        min-height: 120px;
        resize: vertical;
      }

      .reservation-form__inline {
        display: grid;
        gap: 18px;
      }

      @media (min-width: 640px) {
        .reservation-form__inline {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .reservation-form__choices {
        display: grid;
        gap: 12px;
      }

      .reservation-form__choices label {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
      }

      .reservation-form__submit {
        justify-self: start;
      }

      @media (max-width: 1024px) {
        .reservation-navbar__menu,
        .reservation-navbar__cta {
          display: none;
        }

        .reservation-navbar__toggle {
          display: inline-flex;
        }

        .reservation-navbar[data-mobile-open="true"] .reservation-navbar__mobile {
          display: block;
        }
      }

      @media (max-width: 820px) {
        body.reservation-page {
          scroll-padding-top: 96px;
        }

        .reservation-body {
          margin: -60px auto 90px;
        }

        .reservation-cart {
          position: static;
        }
      }

      @media (max-width: 640px) {
        .reservation-section {
          margin-bottom: 48px;
        }

        .reservation-hero__stats {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .reservation-toast {
          inset: auto 16px 24px auto;
          transform: none;
        }
      }
    </style>
  </head>
  <body class="reservation-page">
    <header class="reservation-navbar" data-reservation-nav>
      <div class="reservation-container reservation-navbar__inner">
        <a class="reservation-navbar__brand" href="index.html">
          <span>Tennis Impact Academy</span>
          <span>Réserver un stage</span>
        </a>
        <button class="reservation-navbar__toggle" type="button" data-nav-toggle aria-expanded="false" aria-controls="reservationNavMenu">
          ☰
        </button>
        <nav class="reservation-navbar__menu" id="reservationNavMenu">
          <a href="#calendrier">Calendrier</a>
          <a href="#stages">Stages</a>
          <a href="#methodologie">Méthodologie</a>
          <a href="#destinations">Lieux</a>
          <a href="#options">Options</a>
          <a href="#faq">FAQ</a>
        </nav>
        <a class="reservation-navbar__cta" href="#" data-open-modal>Conciergerie</a>
      </div>
      <div class="reservation-container reservation-navbar__mobile" data-nav-mobile>
        <a href="#calendrier">Calendrier</a>
        <a href="#stages">Stages signature</a>
        <a href="#methodologie">Méthodologie</a>
        <a href="#destinations">Destinations</a>
        <a href="#options">Options premium</a>
        <a href="#faq">FAQ</a>
      </div>
    </header>

    <main>
      <section class="reservation-hero" id="top">
        <div class="reservation-container reservation-hero__inner">
          <span class="reservation-hero__badge">Expérience Signature</span>
          <h1>Réservez votre stage premium avec notre conciergerie dédiée</h1>
          <p>
            Composez votre séjour d&rsquo;exception&nbsp;: sélectionnez vos dates, ajoutez les options hôtelières et transport, puis laissez notre équipe
            conciergerie orchestrer chaque détail pour vous.
          </p>
          <div class="reservation-hero__cta">
            <a class="reservation-button reservation-button--primary" href="#calendrier">Explorer le calendrier</a>
            <button class="reservation-button" type="button" data-open-modal>Parler à la conciergerie</button>
          </div>
          <div class="reservation-hero__stats">
            <div class="reservation-hero__stat">
              <strong>12 coachs experts</strong>
              <span>Préparateurs physiques, mental &amp; vidéo dédiés à votre progression</span>
            </div>
            <div class="reservation-hero__stat">
              <strong>4 destinations</strong>
              <span>Académies &amp; resorts partenaires en France et à l&rsquo;international</span>
            </div>
            <div class="reservation-hero__stat">
              <strong>100% sur-mesure</strong>
              <span>Options hébergement, transport et conciergerie privée</span>
            </div>
          </div>
        </div>
      </section>

      <div class="reservation-container reservation-body">
        <div class="reservation-content">
          <section class="reservation-section" id="calendrier">
            <span class="reservation-section__eyebrow">Planifiez votre venue</span>
            <h2>Un calendrier interactif pour trouver le stage idéal</h2>
            <p>
              Naviguez dans nos prochaines sessions, découvrez les disponibilités en temps réel et ajoutez vos stages préférés à votre panier intelligent.
            </p>
            <div class="calendar-shell">
              <div class="calendar-card">
                <div class="calendar-nav">
                  <button class="calendar-nav__button" type="button" data-calendar-prev aria-label="Mois précédent">‹</button>
                  <span class="calendar-nav__label" data-calendar-label>Juillet 2024</span>
                  <button class="calendar-nav__button" type="button" data-calendar-next aria-label="Mois suivant">›</button>
                </div>
                <div class="calendar-grid" data-calendar-grid>
                  <div class="calendar-grid__dayname">Lun</div>
                  <div class="calendar-grid__dayname">Mar</div>
                  <div class="calendar-grid__dayname">Mer</div>
                  <div class="calendar-grid__dayname">Jeu</div>
                  <div class="calendar-grid__dayname">Ven</div>
                  <div class="calendar-grid__dayname">Sam</div>
                  <div class="calendar-grid__dayname">Dim</div>
                </div>
              </div>
              <aside class="calendar-details" data-calendar-details>
                <span class="calendar-details__badge">Sélection</span>
                <h3>Choisissez une date pour afficher un stage</h3>
                <div class="calendar-details__meta">
                  <span>Nos disponibilités s&rsquo;actualisent en continu.</span>
                  <span>Utilisez le calendrier pour sélectionner vos semaines idéales et ajoutez-les au panier.</span>
                </div>
              </aside>
            </div>
          </section>

          <section class="reservation-section" id="stages">
            <span class="reservation-section__eyebrow">Nos programmes signature</span>
            <h2>Des stages premium adaptés à chaque profil</h2>
            <p>
              Elite, performance ou détente active&nbsp;: sélectionnez le stage qui correspond à vos objectifs. Chaque réservation peut être accompagnée
              d&rsquo;options personnalisées.
            </p>
            <div class="stage-grid" data-stage-list></div>
          </section>

          <section class="reservation-section" id="methodologie">
            <span class="reservation-section__eyebrow">Notre méthodologie</span>
            <h2>Une méthode éprouvée pour des résultats durables</h2>
            <p>
              Notre équipe conjugue expertise technique, préparation physique et suivi mental pour un accompagnement à 360°. Chaque participant
              bénéficie d&rsquo;un diagnostic individuel et d&rsquo;un plan de progression personnalisé.
            </p>
            <div class="reservation-pillars">
              <div class="reservation-pillar">
                <strong>Coaching quotidien</strong>
                <span>4h d&rsquo;entraînement terrain, ateliers tactiques et séances vidéo pour affiner votre jeu.</span>
              </div>
              <div class="reservation-pillar">
                <strong>Suivi performance</strong>
                <span>Bilans de début et fin de stage, statistiques clés et recommandations d&rsquo;entraînement.</span>
              </div>
              <div class="reservation-pillar">
                <strong>Bien-être &amp; récupération</strong>
                <span>Préparation physique, cryothérapie, nutrition personnalisée et accès spa selon destination.</span>
              </div>
            </div>
          </section>

          <section class="reservation-section" id="destinations">
            <span class="reservation-section__eyebrow">Nos destinations</span>
            <h2>Des cadres d&rsquo;exception pour vivre le tennis autrement</h2>
            <p>
              Sélectionnez votre atmosphère&nbsp;: académie intensive, resort 5 étoiles ou immersion nature. Chaque lieu propose un service conciergerie.
            </p>
            <div class="reservation-destinations">
              <div class="reservation-destination">
                <strong>Arcachon – Côte Atlantique</strong>
                <span>Résidence 5★ avec spa marin, accès direct aux courts en terre battue et coaching personnalisé sur place.</span>
              </div>
              <div class="reservation-destination">
                <strong>Paris – Lagardère Paris Racing</strong>
                <span>Club privé iconique, cours couverts &amp; extérieurs, accès lounge et services premium en centre-ville.</span>
              </div>
              <div class="reservation-destination">
                <strong>Val d&rsquo;Isère – Alpes</strong>
                <span>Altitude &amp; oxygénation, sessions outdoor et préparation physique ciblée avec activités montagne.</span>
              </div>
              <div class="reservation-destination">
                <strong>Marbella – Espagne</strong>
                <span>Resort balnéaire, 10 courts, club house gastronomique et conciergerie francophone.</span>
              </div>
              <div class="reservation-destination">
                <strong>Hostens – Landes</strong>
                <span>Immersion nature avec hébergements éco-responsables, programme intensif &amp; activités lacustres.</span>
              </div>
              <div class="reservation-destination">
                <strong>Monaco – Monte-Carlo</strong>
                <span>Accès privilégié aux installations du Monte-Carlo Country Club et service chauffeur dédié.</span>
              </div>
            </div>
          </section>

          <section class="reservation-section" id="options">
            <span class="reservation-section__eyebrow">Options sur-mesure</span>
            <h2>Composez votre expérience avec notre conciergerie</h2>
            <p>
              Hébergement, transport, soirées privées ou accompagnement scolaire&nbsp;: notre équipe personnalise chaque séjour pour qu&rsquo;il soit à la
              hauteur de vos attentes.
            </p>
            <div class="reservation-options">
              <div class="reservation-option">
                <strong>Hébergement 5★ partenaire</strong>
                <span>Chambres premium avec petit-déjeuner gourmet, room service et accès spa illimité.</span>
              </div>
              <div class="reservation-option">
                <strong>Transferts &amp; chauffeur privé</strong>
                <span>Accueil aéroport/gare, chauffeur dédié et déplacements locaux organisés par la conciergerie.</span>
              </div>
              <div class="reservation-option">
                <strong>Nutrition &amp; bien-être</strong>
                <span>Programme nutritionnel, séances de stretching, cryothérapie et massages sportifs sur réservation.</span>
              </div>
              <div class="reservation-option">
                <strong>Expériences exclusives</strong>
                <span>Rencontre avec des joueurs professionnels, soirées privées et visites backstage de tournois.</span>
              </div>
            </div>
          </section>

          <section class="reservation-section" id="faq">
            <span class="reservation-section__eyebrow">FAQ</span>
            <h2>Vos questions fréquentes</h2>
            <p>
              Notre équipe est disponible 7j/7 pour répondre à vos demandes spécifiques et préparer votre séjour de rêve.
            </p>
            <div class="reservation-faq">
              <div class="reservation-faq__item">
                <h3>Quand dois-je réserver mon hébergement&nbsp;?</h3>
                <p>Nous vous conseillons de réserver 4 à 6 semaines à l&rsquo;avance pour garantir la disponibilité des suites partenaires.</p>
              </div>
              <div class="reservation-faq__item">
                <h3>Puis-je venir accompagné&nbsp;?</h3>
                <p>Oui, nous adaptons l&rsquo;hébergement et les options bien-être pour les accompagnants (parents, conjoints, amis).</p>
              </div>
              <div class="reservation-faq__item">
                <h3>Le transport est-il inclus&nbsp;?</h3>
                <p>Le transport est optionnel. Vous pouvez sélectionner les transferts depuis la gare ou l&rsquo;aéroport directement dans le panier.</p>
              </div>
              <div class="reservation-faq__item">
                <h3>Comment se passe la confirmation&nbsp;?</h3>
                <p>Une fois votre demande envoyée, un membre de la conciergerie vous contacte sous 24h pour finaliser votre réservation.</p>
              </div>
            </div>
          </section>
        </div>

        <aside class="reservation-cart" aria-label="Panier de réservation">
          <div class="reservation-cart__header">
            <span>Votre sélection</span>
            <h3>Panier intelligent</h3>
          </div>
          <div class="reservation-cart__items" data-cart-items></div>
          <div class="reservation-cart__total" data-cart-total>
            <span>Total provisoire</span>
            <strong>0&nbsp;€</strong>
          </div>
          <p class="reservation-cart__fineprint">
            L&rsquo;ajout au panier ne bloque pas encore vos places. La conciergerie vous recontacte pour confirmation et paiement sécurisé.
          </p>
          <button class="reservation-button reservation-button--primary" type="button" data-open-modal data-cart-cta disabled>
            Finaliser ma demande
          </button>
        </aside>
      </div>
    </main>

    <div class="reservation-toast" data-toast>Ajouté au panier</div>

    <div class="reservation-modal" data-modal aria-hidden="true">
      <div class="reservation-modal__overlay" data-modal-dismiss></div>
      <div class="reservation-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="reservationModalTitle">
        <button class="reservation-modal__close" type="button" data-modal-dismiss aria-label="Fermer la fenêtre">✕</button>
        <div>
          <span class="reservation-section__eyebrow">Conciergerie</span>
          <h2 id="reservationModalTitle">Formulaire de réservation premium</h2>
          <p>
            Validez votre panier, précisez vos besoins en hébergement ou transport et recevez la confirmation personnalisée d&rsquo;un membre de notre
            conciergerie dans les 24h.
          </p>
        </div>
        <div class="reservation-modal__summary" data-modal-summary>
          Votre panier est vide pour le moment. Ajoutez un stage avant de finaliser votre demande.
        </div>
        <form class="reservation-form" data-reservation-form>
          <div class="reservation-form__inline">
            <div class="reservation-form__group">
              <label for="reservation-name">Nom &amp; prénom</label>
              <input id="reservation-name" name="name" type="text" required autocomplete="name" />
            </div>
            <div class="reservation-form__group">
              <label for="reservation-email">Email</label>
              <input id="reservation-email" name="email" type="email" required autocomplete="email" />
            </div>
          </div>
          <div class="reservation-form__inline">
            <div class="reservation-form__group">
              <label for="reservation-phone">Téléphone</label>
              <input id="reservation-phone" name="phone" type="tel" required autocomplete="tel" />
            </div>
            <div class="reservation-form__group">
              <label for="reservation-participants">Nombre de participants</label>
              <select id="reservation-participants" name="participants">
                <option value="1">1 participant</option>
                <option value="2">2 participants</option>
                <option value="3">3 participants</option>
                <option value="4">4 participants</option>
              </select>
            </div>
          </div>
          <div class="reservation-form__group">
            <label>Souhaitez-vous l&rsquo;hébergement premium&nbsp;?</label>
            <div class="reservation-form__choices">
              <label><input type="radio" name="housing" value="oui" /> Oui, ajoutez l&rsquo;hébergement 5★</label>
              <label><input type="radio" name="housing" value="non" checked /> Non, je gère l&rsquo;hébergement</label>
            </div>
          </div>
          <div class="reservation-form__group">
            <label>Souhaitez-vous le transport privé&nbsp;?</label>
            <div class="reservation-form__choices">
              <label><input type="radio" name="transport" value="oui" /> Oui, transferts et chauffeur</label>
              <label><input type="radio" name="transport" value="non" checked /> Non, je gère mes déplacements</label>
            </div>
          </div>
          <div class="reservation-form__group">
            <label for="reservation-message">Message à la conciergerie</label>
            <textarea id="reservation-message" name="message" placeholder="Précisez vos attentes, régime alimentaire, horaires d&rsquo;arrivée..."></textarea>
          </div>
          <button class="reservation-button reservation-button--primary reservation-form__submit" type="submit">Envoyer ma demande</button>
          <p class="reservation-cart__fineprint">
            Vos informations sont utilisées exclusivement pour organiser votre séjour. Un devis personnalisé vous sera envoyé pour validation.
          </p>
        </form>
        <div class="reservation-modal__confirmation" data-modal-confirmation hidden>
          <h3>Merci&nbsp;! Votre conciergerie prend le relais</h3>
          <p>
            Nous avons bien reçu votre demande. Un membre de l&rsquo;équipe vous contactera sous 24h pour finaliser votre réservation et sécuriser vos
            options premium.
          </p>
        </div>
      </div>
    </div>

    <script>
      const stageCatalogue = [
        {
          id: "elite-juillet",
          name: "Stage Elite Performance",
          category: "Compétiteurs 12-18 ans",
          start: "2024-07-08",
          end: "2024-07-14",
          location: "Arcachon – Résidence 5★",
          price: 1290,
          housingPrice: 420,
          transportPrice: 160,
          spots: 10,
          description: "Stage intensif avec préparation physique quotidienne et analyses vidéo.",
          features: [
            "4h de terrain &amp; prépa physique chaque jour",
            "Coaching mental &amp; routines de match",
            "Accès exclusif au spa marin en fin de journée"
          ]
        },
        {
          id: "performance-aout",
          name: "Stage Performance Adultes",
          category: "Adultes classés",
          start: "2024-08-12",
          end: "2024-08-17",
          location: "Marbella – Resort privé",
          price: 1150,
          housingPrice: 480,
          transportPrice: 190,
          spots: 12,
          description: "Programme performance sur terre battue avec sparring international.",
          features: [
            "Groupes de 4 joueurs maximum",
            "Analyse vidéo service &amp; revers",
            "Cocktail networking et dîner signature"
          ]
        },
        {
          id: "decouverte-septembre",
          name: "Stage Découverte Premium",
          category: "Loisirs &amp; accompagnants",
          start: "2024-09-09",
          end: "2024-09-13",
          location: "Paris – Lagardère Paris Racing",
          price: 890,
          housingPrice: 320,
          transportPrice: 110,
          spots: 14,
          description: "Initiation haut de gamme avec ateliers bien-être et visites culturelles.",
          features: [
            "2h30 de coaching quotidien",
            "Séance yoga &amp; mobilité",
            "Accès lounge et cocktail de clôture"
          ]
        },
        {
          id: "hostens-octobre",
          name: "Stage Intensif Hostens",
          category: "Académie jeunes",
          start: "2024-10-21",
          end: "2024-10-26",
          location: "Hostens – Domaine nature",
          price: 760,
          housingPrice: 260,
          transportPrice: 90,
          spots: 16,
          description: "Immersion nature avec sessions physiques en extérieur et cohésion d'équipe.",
          features: [
            "Triple séance quotidienne",
            "Encadrement 1 coach / 4 joueurs",
            "Activités lacustres et team building"
          ]
        },
        {
          id: "monaco-novembre",
          name: "Masterclass Monte-Carlo",
          category: "Coaching privé",
          start: "2024-11-18",
          end: "2024-11-21",
          location: "Monte-Carlo Country Club",
          price: 2150,
          housingPrice: 680,
          transportPrice: 260,
          spots: 6,
          description: "Coaching individuel sur les installations mythiques de Monaco.",
          features: [
            "2h de cours privés par jour",
            "Rencontre avec un joueur du circuit",
            "Accès lounge Monte-Carlo &amp; dîner gastronomique"
          ]
        }
      ];

      const monthNames = [
        "Janvier",
        "Février",
        "Mars",
        "Avril",
        "Mai",
        "Juin",
        "Juillet",
        "Août",
        "Septembre",
        "Octobre",
        "Novembre",
        "Décembre"
      ];

      const calendarState = (() => {
        const now = new Date();
        const firstStage = stageCatalogue[0];
        if (!firstStage) {
          return { year: now.getFullYear(), month: now.getMonth() };
        }
        const startDate = new Date(firstStage.start);
        return { year: startDate.getFullYear(), month: startDate.getMonth() };
      })();

      const cart = [];

      const nav = document.querySelector("[data-reservation-nav]");
      const navToggle = document.querySelector("[data-nav-toggle]");
      const navMobile = document.querySelector("[data-nav-mobile]");
      const toast = document.querySelector("[data-toast]");
      const cartItemsContainer = document.querySelector("[data-cart-items]");
      const cartTotal = document.querySelector("[data-cart-total]");
      const cartCta = document.querySelector("[data-cart-cta]");
      const stageListContainer = document.querySelector("[data-stage-list]");
      const calendarGrid = document.querySelector("[data-calendar-grid]");
      const calendarLabel = document.querySelector("[data-calendar-label]");
      const calendarDetails = document.querySelector("[data-calendar-details]");
      const modal = document.querySelector("[data-modal]");
      const modalSummary = document.querySelector("[data-modal-summary]");
      const modalConfirmation = document.querySelector("[data-modal-confirmation]");
      const reservationForm = document.querySelector("[data-reservation-form]");

      function formatDateRange(start, end) {
        const startDate = new Date(start);
        const endDate = new Date(end);
        const startDay = startDate.getDate();
        const endDay = endDate.getDate();
        const month = monthNames[startDate.getMonth()];
        return `${startDay} – ${endDay} ${month}`;
      }

      function formatPrice(value) {
        return new Intl.NumberFormat("fr-FR", { style: "currency", currency: "EUR" }).format(value);
      }

      function renderCalendar() {
        const { year, month } = calendarState;
        calendarLabel.textContent = `${monthNames[month]} ${year}`;

        const firstDay = new Date(year, month, 1);
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const offset = (firstDay.getDay() + 6) % 7;

        calendarGrid.querySelectorAll(".calendar-day").forEach((node) => node.remove());

        for (let i = 0; i < offset; i += 1) {
          const filler = document.createElement("div");
          filler.className = "calendar-day calendar-day--empty";
          calendarGrid.appendChild(filler);
        }

        for (let day = 1; day <= daysInMonth; day += 1) {
          const dateIso = `${year}-${String(month + 1).padStart(2, "0")}-${String(day).padStart(2, "0")}`;
          const stage = stageCatalogue.find((item) => item.start === dateIso);
          const dayEl = document.createElement(stage ? "button" : "div");
          if (stage) {
            dayEl.type = "button";
          }
          dayEl.className = "calendar-day";
          dayEl.innerHTML = `<span class="calendar-day__number">${day}</span>`;

          if (stage) {
            dayEl.classList.add("calendar-day--selectable");
            dayEl.dataset.stageId = stage.id;
            dayEl.innerHTML += `<span class="calendar-day__stage">Stage</span>`;
            dayEl.addEventListener("click", () => {
              document.querySelectorAll(".calendar-day--active").forEach((node) => node.classList.remove("calendar-day--active"));
              dayEl.classList.add("calendar-day--active");
              showStageDetails(stage);
            });
          }

          calendarGrid.appendChild(dayEl);
        }
      }

      function showStageDetails(stage) {
        calendarDetails.innerHTML = `
          <span class="calendar-details__badge">Sélection</span>
          <h3>${stage.name}</h3>
          <div class="calendar-details__meta">
            <span><strong>Période :</strong> ${formatDateRange(stage.start, stage.end)}</span>
            <span><strong>Lieu :</strong> ${stage.location}</span>
            <span><strong>Places disponibles :</strong> ${stage.spots}</span>
            <span><strong>Investissement :</strong> ${formatPrice(stage.price)}</span>
          </div>
          <p>${stage.description}</p>
          <ul class="calendar-details__features">
            ${stage.features.map((feature) => `<li>${feature}</li>`).join("")}
          </ul>
          <div class="stage-card__actions">
            <button class="reservation-button reservation-button--primary" type="button" data-add-stage="${stage.id}">
              Ajouter au panier
            </button>
            <button class="reservation-button" type="button" data-open-modal>
              Réserver avec la conciergerie
            </button>
          </div>
        `;
      }

      function renderStageCards() {
        stageListContainer.innerHTML = stageCatalogue
          .map(
            (stage) => `
              <article class="stage-card">
                <div class="stage-card__header">
                  <span class="stage-card__eyebrow">${stage.category}</span>
                  <h3>${stage.name}</h3>
                  <span class="stage-card__price">${formatPrice(stage.price)}</span>
                </div>
                <div class="stage-card__meta">
                  <span><strong>Période :</strong> ${formatDateRange(stage.start, stage.end)}</span>
                  <span><strong>Lieu :</strong> ${stage.location}</span>
                  <span><strong>Places :</strong> ${stage.spots} participants</span>
                </div>
                <p>${stage.description}</p>
                <ul class="stage-card__features">
                  ${stage.features.map((feature) => `<li>${feature}</li>`).join("")}
                </ul>
                <div class="stage-card__actions">
                  <button class="reservation-button reservation-button--primary" type="button" data-add-stage="${stage.id}">
                    Ajouter au panier
                  </button>
                  <button class="reservation-button" type="button" data-open-modal>
                    Contacter la conciergerie
                  </button>
                </div>
              </article>
            `
          )
          .join("");
      }

      function findCartItem(stageId) {
        return cart.find((item) => item.id === stageId);
      }

      function updateCartDisplay() {
        if (!cart.length) {
          cartItemsContainer.innerHTML = '<div class="reservation-cart__empty">Ajoutez un stage pour démarrer votre réservation.</div>';
          cartTotal.querySelector("strong").textContent = "0 €";
          cartCta.disabled = true;
          return;
        }

        cartItemsContainer.innerHTML = cart
          .map((item) => {
            const stage = stageCatalogue.find((stageItem) => stageItem.id === item.id);
            const linePrice = item.quantity * stage.price;
            const housingPrice = item.housing ? item.quantity * stage.housingPrice : 0;
            const transportPrice = item.transport ? item.quantity * stage.transportPrice : 0;
            const total = linePrice + housingPrice + transportPrice;
            return `
              <div class="cart-item" data-cart-item="${item.id}">
                <div class="cart-item__header">
                  <strong>${stage.name}</strong>
                  <button class="cart-item__remove" type="button" data-remove-stage="${item.id}">Retirer</button>
                </div>
                <div class="cart-item__meta">
                  <span>${formatDateRange(stage.start, stage.end)}</span>
                  <span>${stage.location}</span>
                </div>
                <div class="cart-item__controls">
                  <span>Participants</span>
                  <div class="cart-item__quantity">
                    <button type="button" data-qty="minus" aria-label="Réduire">−</button>
                    <span>${item.quantity}</span>
                    <button type="button" data-qty="plus" aria-label="Augmenter">+</button>
                  </div>
                </div>
                <div class="cart-item__options">
                  <label>
                    <input type="checkbox" data-toggle-option="housing" ${item.housing ? "checked" : ""} /> Hébergement + ${formatPrice(stage.housingPrice)} / pers.
                  </label>
                  <label>
                    <input type="checkbox" data-toggle-option="transport" ${item.transport ? "checked" : ""} /> Transport + ${formatPrice(stage.transportPrice)} / pers.
                  </label>
                </div>
                <div class="cart-item__price">${formatPrice(total)}</div>
              </div>
            `;
          })
          .join("");

        const totalValue = cart.reduce((acc, item) => {
          const stage = stageCatalogue.find((stageItem) => stageItem.id === item.id);
          if (!stage) return acc;
          let subtotal = item.quantity * stage.price;
          if (item.housing) subtotal += item.quantity * stage.housingPrice;
          if (item.transport) subtotal += item.quantity * stage.transportPrice;
          return acc + subtotal;
        }, 0);

        cartTotal.querySelector("strong").textContent = formatPrice(totalValue);
        cartCta.disabled = false;
      }

      function addStageToCart(stageId) {
        const stage = stageCatalogue.find((item) => item.id === stageId);
        if (!stage) return;
        const existing = findCartItem(stageId);
        if (existing) {
          existing.quantity += 1;
        } else {
          cart.push({ id: stageId, quantity: 1, housing: false, transport: false });
        }
        updateCartDisplay();
        showToast(`${stage.name} ajouté au panier`);
      }

      function showToast(message) {
        if (!toast) return;
        toast.textContent = message;
        toast.dataset.active = "true";
        setTimeout(() => {
          delete toast.dataset.active;
        }, 2500);
      }

      function handleCartInteraction(event) {
        const target = event.target;
        const cartItemEl = target.closest("[data-cart-item]");
        if (!cartItemEl) return;
        const stageId = cartItemEl.dataset.cartItem;
        const item = findCartItem(stageId);
        if (!item) return;

        if (target.matches("[data-remove-stage]")) {
          const index = cart.findIndex((entry) => entry.id === stageId);
          if (index > -1) {
            cart.splice(index, 1);
            updateCartDisplay();
          }
          return;
        }

        if (target.matches("[data-qty]") || target.closest("[data-qty]") === target) {
          if (target.dataset.qty === "minus" && item.quantity > 1) {
            item.quantity -= 1;
          }
          if (target.dataset.qty === "plus") {
            item.quantity += 1;
          }
          updateCartDisplay();
          return;
        }

        if (target.matches("[data-toggle-option]") || target.closest("[data-toggle-option]") === target) {
          const option = target.dataset.toggleOption;
          if (option === "housing") {
            item.housing = !item.housing;
          }
          if (option === "transport") {
            item.transport = !item.transport;
          }
          updateCartDisplay();
        }
      }

      function openModal() {
        if (cart.length === 0) {
          showToast("Ajoutez un stage avant de finaliser");
          return;
        }
        modal.dataset.open = "true";
        modal.setAttribute("aria-hidden", "false");
        updateModalSummary();
        modalConfirmation.hidden = true;
        reservationForm.hidden = false;
        const firstField = reservationForm.querySelector("input, select, textarea");
        if (firstField) {
          firstField.focus();
        }
      }

      function closeModal() {
        delete modal.dataset.open;
        modal.setAttribute("aria-hidden", "true");
      }

      function updateModalSummary() {
        if (!cart.length) {
          modalSummary.innerHTML = "Votre panier est vide pour le moment.";
          return;
        }
        const summaryHtml = cart
          .map((item) => {
            const stage = stageCatalogue.find((stageItem) => stageItem.id === item.id);
            if (!stage) return "";
            const options = [
              item.housing ? "Hébergement premium" : null,
              item.transport ? "Transferts privés" : null
            ]
              .filter(Boolean)
              .join(" · ");
            return `
              <div>
                <strong>${stage.name}</strong>
                <div>${formatDateRange(stage.start, stage.end)} &ndash; ${stage.location}</div>
                <div>${item.quantity} participant${item.quantity > 1 ? "s" : ""}${options ? ` · ${options}` : ""}</div>
              </div>
            `;
          })
          .join("");
        modalSummary.innerHTML = summaryHtml;
      }

      function handleFormSubmit(event) {
        event.preventDefault();
        reservationForm.hidden = true;
        modalConfirmation.hidden = false;
      }

      function bindEvents() {
        document.querySelectorAll("[data-open-modal]").forEach((button) => {
          button.addEventListener("click", openModal);
        });

        document.querySelectorAll("[data-modal-dismiss]").forEach((button) => {
          button.addEventListener("click", closeModal);
        });

        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape" && modal.dataset.open === "true") {
            closeModal();
          }
        });

        navToggle.addEventListener("click", () => {
          const isOpen = nav.getAttribute("data-mobile-open") === "true";
          nav.setAttribute("data-mobile-open", String(!isOpen));
          navToggle.setAttribute("aria-expanded", String(!isOpen));
        });

        navMobile.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", () => {
            nav.setAttribute("data-mobile-open", "false");
            navToggle.setAttribute("aria-expanded", "false");
          });
        });

        stageListContainer.addEventListener("click", (event) => {
          const button = event.target.closest("[data-add-stage]");
          if (!button) return;
          addStageToCart(button.dataset.addStage);
        });

        calendarDetails.addEventListener("click", (event) => {
          const button = event.target.closest("[data-add-stage]");
          if (!button) return;
          addStageToCart(button.dataset.addStage);
        });

        cartItemsContainer.addEventListener("click", handleCartInteraction);

        document.querySelector("[data-calendar-prev]").addEventListener("click", () => {
          if (calendarState.month === 0) {
            calendarState.month = 11;
            calendarState.year -= 1;
          } else {
            calendarState.month -= 1;
          }
          renderCalendar();
        });

        document.querySelector("[data-calendar-next]").addEventListener("click", () => {
          if (calendarState.month === 11) {
            calendarState.month = 0;
            calendarState.year += 1;
          } else {
            calendarState.month += 1;
          }
          renderCalendar();
        });

        reservationForm.addEventListener("submit", handleFormSubmit);
      }

      renderCalendar();
      renderStageCards();
      updateCartDisplay();
      bindEvents();
    </script>
  </body>
</html>
