<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RÃ©server votre stage - Tennis Impact</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      :root {
        color-scheme: light;
        --reservation-bg: radial-gradient(circle at 10% -20%, rgba(201, 155, 59, 0.22), transparent 55%),
          linear-gradient(145deg, #fefbf6 0%, #f5f7ff 38%, #ffffff 100%);
        --reservation-surface: rgba(255, 255, 255, 0.9);
        --reservation-card: rgba(255, 255, 255, 0.8);
        --reservation-border: rgba(28, 34, 52, 0.08);
        --reservation-contrast: #1b2333;
        --reservation-muted: rgba(27, 35, 51, 0.68);
        --reservation-highlight: #c99b3b;
        --reservation-highlight-strong: #b8861f;
        --reservation-error: #d94c5f;
        --reservation-radius-lg: 26px;
        --reservation-radius-md: 18px;
        --reservation-radius-sm: 12px;
        --reservation-shadow: 0 22px 60px rgba(23, 32, 53, 0.16);
      }

      body.reservation-page {
        margin: 0;
        min-height: 100vh;
        font-family: "Poppins", "Segoe UI", sans-serif;
        background: var(--reservation-bg);
        color: var(--reservation-contrast);
        line-height: 1.6;
        scroll-behavior: smooth;
        scroll-padding-top: 110px;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        display: block;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      .reservation-container {
        width: min(1140px, 92vw);
        margin: 0 auto;
      }

      header.reservation-header {
        position: fixed;
        inset: 0 0 auto 0;
        z-index: 40;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(18px);
        border-bottom: 1px solid var(--reservation-border);
        box-shadow: 0 12px 28px rgba(23, 32, 53, 0.08);
        color: var(--reservation-contrast);
      }

      .reservation-header__inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 24px;
        padding: 20px 0;
      }

      .reservation-logo {
        font-family: "Playfair Display", serif;
        font-size: 1.5rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--reservation-contrast);
      }

      .reservation-nav {
        display: flex;
        align-items: center;
        gap: 18px;
      }

      .reservation-nav a {
        font-size: 0.95rem;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        padding: 10px 12px;
        border-radius: 999px;
        transition: background 0.25s ease, color 0.25s ease;
        color: var(--reservation-muted);
        font-weight: 500;
      }

      .reservation-nav a:hover,
      .reservation-nav a:focus {
        outline: none;
        background: rgba(27, 35, 51, 0.08);
        color: var(--reservation-highlight);
      }

      .reservation-nav__toggle {
        display: none;
        border: 1px solid var(--reservation-border);
        background: transparent;
        color: var(--reservation-contrast);
        padding: 10px 16px;
        border-radius: 999px;
        font-size: 0.95rem;
        letter-spacing: 0.08em;
      }

      .reservation-cart-pill {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 18px;
        border-radius: 999px;
        border: 1px solid var(--reservation-border);
        background: rgba(27, 35, 51, 0.05);
        color: var(--reservation-contrast);
        font-size: 0.9rem;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        cursor: pointer;
        transition: background 0.3s ease, transform 0.3s ease, color 0.3s ease;
      }

      .reservation-cart-pill:hover,
      .reservation-cart-pill:focus {
        outline: none;
        background: rgba(201, 155, 59, 0.16);
        color: var(--reservation-highlight-strong);
        transform: translateY(-1px);
      }

      .reservation-cart-pill__count {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: var(--reservation-highlight);
        color: #1a1406;
        font-weight: 600;
        font-size: 0.8rem;
      }

      main {
        padding-top: 120px;
      }

      .reservation-hero {
        padding: clamp(120px, 18vw, 180px) 0 120px;
        position: relative;
      }

      .reservation-hero::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(circle at 80% 10%, rgba(201, 155, 59, 0.18), transparent 58%);
      }

      .reservation-hero__inner {
        position: relative;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(32px, 6vw, 72px);
        align-items: center;
      }

      .reservation-hero__eyebrow {
        display: inline-flex;
        align-items: center;
        gap: 12px;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.3em;
        color: var(--reservation-highlight);
        margin-bottom: 18px;
      }

      .reservation-hero__eyebrow::before {
        content: "";
        width: 42px;
        height: 1px;
        background: currentColor;
      }

      .reservation-hero__title {
        font-family: "Playfair Display", serif;
        font-size: clamp(2.5rem, 4.5vw, 4rem);
        line-height: 1.1;
        margin: 0 0 24px;
      }

      .reservation-hero__title span {
        color: var(--reservation-highlight);
      }

      .reservation-hero__lead {
        margin: 0 0 32px;
        color: var(--reservation-muted);
        font-size: clamp(1rem, 1.3vw, 1.15rem);
      }

      .reservation-hero__card {
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        border-radius: var(--reservation-radius-lg);
        padding: clamp(28px, 5vw, 36px);
        box-shadow: var(--reservation-shadow);
      }

      .reservation-hero__card h3 {
        margin-top: 0;
        margin-bottom: 12px;
        font-size: 1.35rem;
      }

      .reservation-hero__card p {
        margin: 0 0 20px;
        color: var(--reservation-muted);
        font-size: 0.98rem;
      }

      .reservation-hero__list {
        list-style: none;
        padding: 0;
        margin: 0 0 24px;
        display: grid;
        gap: 12px;
      }

      .reservation-hero__list li {
        position: relative;
        padding-left: 22px;
        color: var(--reservation-muted);
        font-size: 0.95rem;
      }

      .reservation-hero__list li::before {
        content: "";
        position: absolute;
        left: 0;
        top: 11px;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--reservation-highlight);
      }

      .reservation-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
      }

      .btn-primary,
      .btn-secondary,
      .btn-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        border-radius: 999px;
        padding: 12px 26px;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-size: 0.92rem;
        cursor: pointer;
        border: none;
        transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;
      }

      .btn-primary {
        background: var(--reservation-highlight);
        color: #1b1405;
        box-shadow: 0 15px 30px rgba(201, 155, 59, 0.25);
      }

      .btn-primary:hover,
      .btn-primary:focus {
        outline: none;
        transform: translateY(-2px);
        box-shadow: 0 20px 40px rgba(201, 155, 59, 0.3);
      }

      .btn-secondary {
        background: transparent;
        color: var(--reservation-highlight);
        border: 1px solid rgba(201, 155, 59, 0.4);
      }

      .btn-secondary:hover,
      .btn-secondary:focus {
        outline: none;
        background: rgba(201, 155, 59, 0.12);
      }

      .btn-link {
        background: rgba(27, 35, 51, 0.06);
        color: var(--reservation-highlight-strong);
        border: 1px solid rgba(201, 155, 59, 0.2);
      }

      .btn-link:hover,
      .btn-link:focus {
        outline: none;
        background: rgba(201, 155, 59, 0.16);
      }

      section.reservation-section {
        padding: clamp(72px, 12vw, 120px) 0;
        scroll-margin-top: 120px;
        position: relative;
      }

      section.reservation-section:nth-of-type(even) {
        background: rgba(255, 255, 255, 0.66);
      }

      .section-heading {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: clamp(32px, 6vw, 48px);
      }

      .section-heading span {
        font-size: 0.75rem;
        letter-spacing: 0.3em;
        text-transform: uppercase;
        color: var(--reservation-highlight);
      }

      .section-heading h2 {
        margin: 0;
        font-family: "Playfair Display", serif;
        font-size: clamp(2rem, 3.6vw, 2.8rem);
      }

      .section-heading p {
        max-width: 680px;
        color: var(--reservation-muted);
        margin: 0;
      }

      .calendar-panel {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: clamp(24px, 6vw, 48px);
      }

      .calendar-grid {
        display: grid;
        gap: 18px;
      }

      .calendar-week {
        display: grid;
        gap: 6px;
        padding: 18px;
        border-radius: var(--reservation-radius-md);
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        text-align: left;
        cursor: pointer;
        transition: transform 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
        box-shadow: var(--reservation-shadow);
      }

      .calendar-week span {
        display: block;
      }

      .calendar-week__label {
        font-weight: 600;
        font-size: 1.05rem;
      }

      .calendar-week__locations {
        color: var(--reservation-muted);
        font-size: 0.9rem;
      }

      .calendar-week__status {
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: rgba(201, 155, 59, 0.9);
      }

      .calendar-week.is-active {
        border-color: rgba(201, 155, 59, 0.55);
        box-shadow: 0 26px 54px rgba(201, 155, 59, 0.22);
        transform: translateY(-3px);
      }

      .calendar-summary {
        display: grid;
        gap: 16px;
      }

      .calendar-summary__card {
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        padding: 20px;
        border-radius: var(--reservation-radius-md);
        box-shadow: var(--reservation-shadow);
      }

      .calendar-summary__card strong {
        display: block;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .calendar-summary__list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 10px;
      }

      .calendar-summary__list li {
        color: var(--reservation-muted);
        font-size: 0.92rem;
      }

      .calendar-summary__empty {
        background: rgba(255, 255, 255, 0.92);
        border: 1px dashed rgba(201, 155, 59, 0.35);
        border-radius: var(--reservation-radius-md);
        padding: 20px;
        text-align: center;
        color: var(--reservation-muted);
      }

      .stage-grid {
        display: grid;
        gap: clamp(24px, 6vw, 36px);
      }

      .stage-card {
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        border-radius: var(--reservation-radius-lg);
        padding: clamp(28px, 5vw, 38px);
        display: grid;
        gap: 18px;
        box-shadow: var(--reservation-shadow);
      }

      .stage-card.is-selected {
        border-color: rgba(201, 155, 59, 0.4);
        box-shadow: 0 32px 60px rgba(201, 155, 59, 0.22);
      }

      .stage-card__header {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .stage-card__category {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.32em;
        color: rgba(201, 155, 59, 0.8);
      }

      .stage-card__title {
        margin: 0;
        font-size: 1.5rem;
        font-family: "Playfair Display", serif;
      }

      .stage-card__location {
        margin: 0;
        color: var(--reservation-muted);
        font-weight: 500;
      }

      .stage-card__description {
        margin: 0;
        color: var(--reservation-muted);
      }

      .stage-card__tags {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .stage-card__tag {
        padding: 8px 16px;
        border-radius: 999px;
        border: 1px solid rgba(201, 155, 59, 0.35);
        color: var(--reservation-highlight-strong);
        font-size: 0.75rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        background: rgba(201, 155, 59, 0.08);
      }

      .stage-card__status {
        padding: 12px 16px;
        border-radius: var(--reservation-radius-sm);
        background: rgba(201, 155, 59, 0.12);
        color: var(--reservation-highlight-strong);
        font-size: 0.85rem;
        letter-spacing: 0.04em;
      }

      .stage-card__footer {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 18px;
      }

      .stage-card__price {
        font-size: 1.2rem;
        font-weight: 600;
      }

      .stage-card__weeks {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        color: var(--reservation-muted);
        font-size: 0.85rem;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: clamp(24px, 5vw, 36px);
      }

      .info-card {
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        border-radius: var(--reservation-radius-md);
        padding: clamp(24px, 4vw, 32px);
        display: grid;
        gap: 14px;
        box-shadow: var(--reservation-shadow);
      }

      .info-card h3 {
        margin: 0;
        font-size: 1.25rem;
        font-family: "Playfair Display", serif;
      }

      .info-card p {
        margin: 0;
        color: var(--reservation-muted);
        font-size: 0.95rem;
      }

      .info-card ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 10px;
        color: var(--reservation-muted);
        font-size: 0.92rem;
      }

      .faq {
        display: grid;
        gap: 18px;
      }

      .faq-item {
        background: var(--reservation-card);
        border: 1px solid var(--reservation-border);
        border-radius: var(--reservation-radius-md);
        padding: 20px 24px;
        box-shadow: var(--reservation-shadow);
      }

      .faq-item h3 {
        margin: 0 0 10px;
        font-size: 1.1rem;
        font-family: "Playfair Display", serif;
      }

      .faq-item p {
        margin: 0;
        color: var(--reservation-muted);
      }

      .reservation-footer {
        padding: 48px 0 64px;
        color: rgba(27, 35, 51, 0.6);
        font-size: 0.85rem;
        text-align: center;
      }

      .reservation-footer a {
        color: var(--reservation-highlight-strong);
      }

      .reservation-toast {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%) translateY(120%);
        background: var(--reservation-card);
        border: 1px solid rgba(201, 155, 59, 0.45);
        padding: 16px 22px;
        border-radius: 999px;
        font-size: 0.95rem;
        letter-spacing: 0.04em;
        color: var(--reservation-highlight-strong);
        font-weight: 600;
        box-shadow: var(--reservation-shadow);
        transition: transform 0.35s ease;
        z-index: 60;
      }

      .reservation-toast.is-visible {
        transform: translateX(-50%) translateY(0);
      }

      .reservation-modal,
      .reservation-cart {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 80;
      }

      .reservation-modal.is-visible,
      .reservation-cart.is-visible {
        display: flex;
      }

      .reservation-modal__overlay,
      .reservation-cart__overlay {
        position: absolute;
        inset: 0;
        background: rgba(27, 35, 51, 0.2);
        backdrop-filter: blur(14px);
      }

      .reservation-modal__dialog,
      .reservation-cart__dialog {
        position: relative;
        z-index: 1;
        width: min(540px, 92vw);
        max-height: 90vh;
        overflow: hidden;
        background: var(--reservation-surface);
        border-radius: var(--reservation-radius-lg);
        border: 1px solid var(--reservation-border);
        box-shadow: var(--reservation-shadow);
        display: grid;
      }

      .reservation-modal__content,
      .reservation-cart__content {
        padding: clamp(28px, 5vw, 36px);
        overflow-y: auto;
      }

      .reservation-modal__header,
      .reservation-cart__header {
        padding: 26px clamp(28px, 5vw, 36px) 0;
        display: grid;
        gap: 6px;
      }

      .reservation-modal__header h2,
      .reservation-cart__header h2 {
        margin: 0;
        font-family: "Playfair Display", serif;
        font-size: 1.6rem;
      }

      .reservation-modal__close,
      .reservation-cart__close {
        position: absolute;
        top: 18px;
        right: 18px;
        background: rgba(27, 35, 51, 0.08);
        border: none;
        color: inherit;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 1.4rem;
        cursor: pointer;
      }

      .reservation-modal__meta {
        color: var(--reservation-muted);
        font-size: 0.9rem;
        margin: 0;
      }

      .form-grid {
        display: grid;
        gap: 18px;
      }

      .form-group {
        display: grid;
        gap: 8px;
      }

      .form-group label {
        font-size: 0.85rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: rgba(201, 155, 59, 0.9);
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        padding: 12px 14px;
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(28, 34, 52, 0.15);
        background: rgba(255, 255, 255, 0.95);
        color: var(--reservation-contrast);
        font: inherit;
      }

      .form-group textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-switch {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        padding: 14px 16px;
        border-radius: var(--reservation-radius-sm);
        border: 1px solid rgba(28, 34, 52, 0.12);
        background: rgba(255, 255, 255, 0.9);
      }

      .form-switch label {
        font-size: 0.9rem;
        color: var(--reservation-muted);
      }

      .form-switch input {
        width: 44px;
        height: 24px;
        border-radius: 999px;
        appearance: none;
        background: rgba(27, 35, 51, 0.2);
        position: relative;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .form-switch input::after {
        content: "";
        position: absolute;
        top: 3px;
        left: 4px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #fff;
        transition: transform 0.2s ease;
      }

      .form-switch input:checked {
        background: var(--reservation-highlight);
      }

      .form-switch input:checked::after {
        transform: translateX(18px);
        background: #1a1406;
      }

      .cart-list {
        display: grid;
        gap: 18px;
      }

      .cart-item {
        border: 1px solid rgba(28, 34, 52, 0.12);
        border-radius: var(--reservation-radius-sm);
        padding: 18px;
        display: grid;
        gap: 10px;
        background: rgba(255, 255, 255, 0.92);
        box-shadow: var(--reservation-shadow);
      }

      .cart-item__top {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: space-between;
      }

      .cart-item__title {
        font-weight: 600;
      }

      .cart-item__meta {
        color: var(--reservation-muted);
        font-size: 0.9rem;
      }

      .cart-item__actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }

      .cart-item__remove {
        background: transparent;
        border: none;
        color: var(--reservation-error);
        cursor: pointer;
        font-size: 0.85rem;
      }

      .cart-total {
        margin: 6px 0 0;
        font-size: 1.1rem;
        font-weight: 600;
      }

      .cart-empty {
        text-align: center;
        color: var(--reservation-muted);
        padding: 32px 16px;
        border: 1px dashed rgba(201, 155, 59, 0.35);
        border-radius: var(--reservation-radius-sm);
        background: rgba(255, 255, 255, 0.92);
      }

      .cart-form {
        margin-top: 26px;
        display: grid;
        gap: 18px;
      }

      .cart-form__actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      noscript {
        display: block;
        margin: 120px auto 0;
        width: min(480px, 90vw);
        background: rgba(255, 255, 255, 0.92);
        color: var(--reservation-contrast);
        padding: 24px 28px;
        border-radius: var(--reservation-radius-md);
        border: 1px solid rgba(201, 155, 59, 0.35);
        text-align: center;
        box-shadow: var(--reservation-shadow);
      }

      @media (max-width: 1024px) {
        .reservation-nav {
          position: fixed;
          inset: 76px 20px auto 20px;
          flex-direction: column;
          align-items: flex-start;
          padding: 22px;
          border-radius: var(--reservation-radius-md);
          background: rgba(255, 255, 255, 0.98);
          border: 1px solid var(--reservation-border);
          box-shadow: var(--reservation-shadow);
          transform-origin: top right;
          transform: scale(0.95);
          opacity: 0;
          pointer-events: none;
          transition: opacity 0.25s ease, transform 0.25s ease;
        }

        .reservation-nav.is-open {
          opacity: 1;
          pointer-events: auto;
          transform: scale(1);
        }

        .reservation-nav a {
          width: 100%;
          padding: 12px 0;
        }

        .reservation-nav__toggle {
          display: inline-flex;
        }

        .reservation-header__inner {
          align-items: flex-start;
        }
      }

      @media (max-width: 820px) {
        .calendar-panel {
          grid-template-columns: 1fr;
        }

        .reservation-hero__inner {
          grid-template-columns: 1fr;
        }

        .stage-card__footer {
          justify-content: flex-start;
        }
      }

      @media (max-width: 640px) {
        .reservation-header__inner {
          flex-direction: column;
          align-items: flex-start;
        }

        .reservation-cart-pill {
          align-self: flex-end;
        }

        .reservation-hero {
          padding-bottom: 96px;
        }

        .stage-card {
          padding: 24px;
        }

        .reservation-modal__dialog,
        .reservation-cart__dialog {
          width: min(480px, 94vw);
        }
      }
    </style>
  </head>
  <body class="reservation-page">
    <noscript>
      Pour rÃ©server votre stage, merci d'activer JavaScript. Toutes les informations restent disponibles ci-dessous et
      notre Ã©quipe reste joignable par tÃ©lÃ©phone pour finaliser votre inscription.
    </noscript>
    <header class="reservation-header">
      <div class="reservation-container reservation-header__inner">
        <a class="reservation-logo" href="index.html">Tennis Impact</a>
        <button class="reservation-nav__toggle" type="button" data-nav-toggle>Menu</button>
        <nav class="reservation-nav" data-nav>
          <a href="#calendrier">Calendrier</a>
          <a href="#stages">Stages</a>
          <a href="#methodologie">MÃ©thodologie</a>
          <a href="#lieux">Lieux</a>
          <a href="#options">Options</a>
          <a href="#faq">FAQ</a>
          <a href="index.html#contact">Contact</a>
        </nav>
        <button class="reservation-cart-pill" type="button" data-cart-open>
          Voir le panier
          <span class="reservation-cart-pill__count" data-cart-count>0</span>
        </button>
      </div>
    </header>
    <main>
      <section class="reservation-hero" id="top">
        <div class="reservation-container reservation-hero__inner">
          <div>
            <span class="reservation-hero__eyebrow">Stage premium</span>
            <h1 class="reservation-hero__title">
              RÃ©servez votre semaine de tennis <span>d'exception</span>
            </h1>
            <p class="reservation-hero__lead">
              Choisissez votre semaine, personnalisez vos options hÃ©bergement et transport puis validez votre panier en
              quelques clics. Nos Ã©quipes basÃ©es dans les CREPS partenaires vous accompagnent avant, pendant et aprÃ¨s
              votre stage.
            </p>
            <div class="reservation-actions">
              <button class="btn-primary" type="button" data-scroll-to="#calendrier">Choisir une semaine</button>
              <button class="btn-secondary" type="button" data-cart-open>Voir le panier</button>
            </div>
          </div>
          <div class="reservation-hero__card">
            <h3>Ce qui vous attend</h3>
            <p>
              Un suivi personnalisÃ© au sein des CREPS de Poitiers, Toulouse et Aix-en-Provence ainsi que sur nos sites
              partenaires du Domaine des Landes Girondines et de Cabourg.
            </p>
            <ul class="reservation-hero__list">
              <li>Encadrement certifiÃ© et suivi vidÃ©o quotidien</li>
              <li>HÃ©bergement premium et navettes en option</li>
              <li>AccÃ¨s aux installations haut niveau FFT</li>
            </ul>
            <button class="btn-link" type="button" data-scroll-to="#methodologie">DÃ©couvrir notre mÃ©thode</button>
          </div>
        </div>
      </section>

      <section class="reservation-section" id="calendrier">
        <div class="reservation-container">
          <div class="section-heading">
            <span>Calendrier interactif</span>
            <h2>RÃ©servez votre semaine idÃ©ale</h2>
            <p>
              SÃ©lectionnez une semaine dans le calendrier pour filtrer les stages disponibles. Chaque stage peut Ãªtre
              personnalisÃ© avec ou sans hÃ©bergement et transport.
            </p>
          </div>
          <div class="calendar-panel">
            <div class="calendar-grid" id="calendarGrid" role="tablist" aria-label="Semaines disponibles"></div>
            <div class="calendar-summary" id="calendarSummary"></div>
          </div>
        </div>
      </section>

      <section class="reservation-section" id="stages">
        <div class="reservation-container">
          <div class="section-heading">
            <span>Stages par semaine</span>
            <h2>Une sÃ©lection premium pour tous les profils</h2>
            <p>
              Choisissez votre stage puis personnalisez vos options. Ajoutez-le au panier pour finaliser votre demande de
              rÃ©servation.
            </p>
          </div>
          <p id="stageHint" style="color: var(--reservation-muted); margin-bottom: 28px;">
            SÃ©lectionnez d'abord une semaine dans le calendrier.
          </p>
          <div class="stage-grid" id="stageGrid" aria-live="polite"></div>
        </div>
      </section>

      <section class="reservation-section" id="methodologie">
        <div class="reservation-container">
          <div class="section-heading">
            <span>MÃ©thodologie</span>
            <h2>Notre approche haute performance</h2>
            <p>
              Chaque stage est orchestrÃ© par nos coachs nationaux avec un suivi prÃ©cis des volumes d'entraÃ®nement, des
              sÃ©ances physiques et de la prÃ©paration mentale.
            </p>
          </div>
          <div class="info-grid">
            <article class="info-card">
              <h3>Analyse & objectifs</h3>
              <p>
                Entretien individuel dÃ¨s l'arrivÃ©e, planification des objectifs sur la semaine et brief quotidien avec
                votre coach rÃ©fÃ©rent.
              </p>
              <ul>
                <li>Ãvaluation technique vidÃ©o</li>
                <li>Plan tactique personnalisÃ©</li>
                <li>Suivi charge d'entraÃ®nement</li>
              </ul>
            </article>
            <article class="info-card">
              <h3>PrÃ©paration globale</h3>
              <p>
                Sessions physiques ciblÃ©es (force, vitesse, mobilitÃ©) et ateliers de prÃ©vention des blessures pour
                optimiser votre progression.
              </p>
              <ul>
                <li>PrÃ©paration physique quotidienne</li>
                <li>Routines de rÃ©cupÃ©ration</li>
                <li>PrÃ©paration mentale intÃ©grÃ©e</li>
              </ul>
            </article>
            <article class="info-card">
              <h3>Suivi post-stage</h3>
              <p>
                Restitution complÃ¨te avec recommandations et plan d'entraÃ®nement personnalisÃ© envoyÃ© sous 72h aprÃ¨s la
                semaine.
              </p>
              <ul>
                <li>Dossier vidÃ©o et statistiques</li>
                <li>Axes prioritaires de travail</li>
                <li>AccÃ¨s coach Ã  distance</li>
              </ul>
            </article>
          </div>
        </div>
      </section>

      <section class="reservation-section" id="lieux">
        <div class="reservation-container">
          <div class="section-heading">
            <span>Lieux d'exception</span>
            <h2>Des infrastructures pensÃ©es pour la performance</h2>
            <p>
              Nous sÃ©lectionnons les meilleurs cadres d'entraÃ®nement pour offrir des conditions optimales : courts
              couverts, salles de prÃ©paration physique, espaces de rÃ©cupÃ©ration et hÃ©bergements haut de gamme.
            </p>
          </div>
          <div class="info-grid">
            <article class="info-card">
              <h3>CREPS de Poitiers</h3>
              <p>
                Centre d'entraÃ®nement fÃ©dÃ©ral avec courts indoor, terrain terre battue et hÃ©bergement intÃ©grÃ© pour les
                stages intensifs.
              </p>
            </article>
            <article class="info-card">
              <h3>CREPS de Toulouse</h3>
              <p>
                Infrastructures FFT haut niveau, terrains couverts climatisÃ©s et salle de performance dÃ©diÃ©e Ã  la
                prÃ©paration physique.
              </p>
            </article>
            <article class="info-card">
              <h3>CREPS d'Aix-en-Provence</h3>
              <p>
                RÃ©fÃ©rence terre battue avec staff technique spÃ©cialisÃ© et accÃ¨s privilÃ©giÃ© aux installations olympiques.
              </p>
            </article>
            <article class="info-card">
              <h3>Domaine des Landes Girondines</h3>
              <p>
                Resort familial premium, programme mixte parents/enfants et activitÃ©s plage & golf exclusives.
              </p>
            </article>
            <article class="info-card">
              <h3>Cabourg</h3>
              <p>
                Cadre bord de mer avec tournois nocturnes, prÃ©paration plage et accÃ¨s thalasso partenaire.
              </p>
            </article>
          </div>
        </div>
      </section>

      <section class="reservation-section" id="options">
        <div class="reservation-container">
          <div class="section-heading">
            <span>Options & services</span>
            <h2>Composez votre expÃ©rience</h2>
            <p>
              Chaque panier peut inclure un hÃ©bergement premium en pension complÃ¨te, des transferts sur-mesure et des
              sÃ©ances additionnelles.
            </p>
          </div>
          <div class="info-grid">
            <article class="info-card">
              <h3>HÃ©bergement premium</h3>
              <ul>
                <li>RÃ©sidences intÃ©grÃ©es aux CREPS ou resort 4â</li>
                <li>Chambres twin ou individuelles selon disponibilitÃ©</li>
                <li>Pension complÃ¨te et encadrement 24/7</li>
              </ul>
            </article>
            <article class="info-card">
              <h3>Transferts & transport</h3>
              <ul>
                <li>Navettes depuis gares et aÃ©roports</li>
                <li>Transport quotidien vers les courts</li>
                <li>Assistance bagages et accueil personnalisÃ©</li>
              </ul>
            </article>
            <article class="info-card">
              <h3>ExpÃ©riences additionnelles</h3>
              <ul>
                <li>SÃ©ance individuelle vidÃ©o 45 minutes</li>
                <li>AccÃ¨s bien-Ãªtre (sauna, cryothÃ©rapie)</li>
                <li>Coaching mental privÃ© et suivi nutrition</li>
              </ul>
            </article>
          </div>
        </div>
      </section>

      <section class="reservation-section" id="faq">
        <div class="reservation-container">
          <div class="section-heading">
            <span>Questions frÃ©quentes</span>
            <h2>Toutes les rÃ©ponses avant de rÃ©server</h2>
            <p>
              Notre Ã©quipe reste disponible par mail et tÃ©lÃ©phone pour toute prÃ©cision supplÃ©mentaire sur les stages,
              options ou modalitÃ©s de paiement.
            </p>
          </div>
          <div class="faq">
            <article class="faq-item">
              <h3>Comment finaliser ma rÃ©servation ?</h3>
              <p>
                Ajoutez vos stages au panier avec les options souhaitÃ©es puis validez le formulaire de demande. Un membre
                de notre Ã©quipe vous contacte sous 48h pour finaliser le paiement et confirmer l'inscription.
              </p>
            </article>
            <article class="faq-item">
              <h3>Peut-on rÃ©server plusieurs semaines ?</h3>
              <p>
                Oui, sÃ©lectionnez chaque semaine dans le calendrier et ajoutez les stages associÃ©s Ã  votre panier. Vous
                pouvez Ã©galement dupliquer vos options pour faciliter l'inscription.
              </p>
            </article>
            <article class="faq-item">
              <h3>Les options sont-elles modifiables ?</h3>
              <p>
                HÃ©bergement et transport sont ajustables jusqu'Ã  15 jours avant le dÃ©but du stage. Nous vous accompagnons
                pour adapter votre expÃ©rience en fonction de vos contraintes.
              </p>
            </article>
          </div>
        </div>
      </section>
    </main>

    <footer class="reservation-footer">
      <div class="reservation-container">
        Â© Tennis Impact. Besoin d'aide ? <a href="mailto:contact@tennisimpact.fr">contact@tennisimpact.fr</a>
      </div>
    </footer>

    <div class="reservation-modal" data-booking-modal aria-hidden="true">
      <div class="reservation-modal__overlay" data-modal-close></div>
      <div class="reservation-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="bookingTitle">
        <button class="reservation-modal__close" type="button" data-modal-close aria-label="Fermer">Ã</button>
        <header class="reservation-modal__header">
          <span class="reservation-hero__eyebrow" style="margin-bottom: 0;">Ajouter au panier</span>
          <h2 id="bookingTitle">Stage sÃ©lectionnÃ©</h2>
          <p class="reservation-modal__meta" id="bookingLocation"></p>
        </header>
        <div class="reservation-modal__content">
          <form class="form-grid" data-booking-form>
            <input type="hidden" id="bookingStageId" />
            <div class="form-group">
              <label for="bookingWeek">Semaine</label>
              <select id="bookingWeek" required></select>
            </div>
            <div class="form-group">
              <label for="bookingParticipants">Participants</label>
              <input id="bookingParticipants" type="number" min="1" max="4" value="1" required />
            </div>
            <div class="form-switch">
              <label for="bookingLodging">Inclure l'hÃ©bergement premium</label>
              <input id="bookingLodging" type="checkbox" />
            </div>
            <div class="form-switch">
              <label for="bookingTransport">Inclure le transport dÃ©diÃ©</label>
              <input id="bookingTransport" type="checkbox" />
            </div>
            <div class="form-group">
              <label for="bookingNotes">PrÃ©cisions</label>
              <textarea id="bookingNotes" placeholder="Allergies, niveau de jeu, heures d'arrivÃ©eâ¦"></textarea>
            </div>
            <button class="btn-primary" type="submit">Ajouter au panier</button>
          </form>
        </div>
      </div>
    </div>

    <div class="reservation-cart" data-cart-modal aria-hidden="true">
      <div class="reservation-cart__overlay" data-cart-close></div>
      <div class="reservation-cart__dialog" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
        <button class="reservation-cart__close" type="button" data-cart-close aria-label="Fermer le panier">Ã</button>
        <header class="reservation-cart__header">
          <span class="reservation-hero__eyebrow" style="margin-bottom: 0;">Panier</span>
          <h2 id="cartTitle">Votre sÃ©lection</h2>
          <p class="reservation-modal__meta">
            VÃ©rifiez vos semaines, options et participants avant d'envoyer votre demande de rÃ©servation.
          </p>
        </header>
        <div class="reservation-cart__content">
          <div class="cart-list" data-cart-list></div>
          <form class="cart-form" data-cart-form>
            <div class="form-group">
              <label for="cartName">Nom & prÃ©nom du rÃ©fÃ©rent</label>
              <input id="cartName" type="text" name="name" autocomplete="name" required />
            </div>
            <div class="form-group">
              <label for="cartEmail">E-mail</label>
              <input id="cartEmail" type="email" name="email" autocomplete="email" required />
            </div>
            <div class="form-group">
              <label for="cartPhone">TÃ©lÃ©phone</label>
              <input id="cartPhone" type="tel" name="phone" autocomplete="tel" required />
            </div>
            <div class="form-group">
              <label for="cartMessage">Message complÃ©mentaire</label>
              <textarea id="cartMessage" name="message" placeholder="Besoin de rÃ©server plusieurs chambres, prÃ©cisions horairesâ¦"></textarea>
            </div>
            <div class="cart-form__actions">
              <button class="btn-secondary" type="button" data-cart-close>Continuer mes rÃ©servations</button>
              <button class="btn-primary" type="submit">Envoyer ma demande</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="reservation-toast" role="status" aria-live="polite" id="reservationToast">Stage ajoutÃ© Ã  votre panier.</div>

    <script>
      document.documentElement.classList.add('js');
      const weeks = [
        {
          id: '2024-07-08',
          label: '8 â 13 juillet',
          summary: 'CREPS Poitiers â¢ CREPS Toulouse â¢ Aix-en-Provence',
          spots: 12
        },
        {
          id: '2024-07-15',
          label: '15 â 20 juillet',
          summary: 'Poitiers â¢ Domaine des Landes Girondines â¢ Cabourg',
          spots: 10
        },
        {
          id: '2024-07-22',
          label: '22 â 27 juillet',
          summary: 'Poitiers â¢ Toulouse â¢ Aix-en-Provence',
          spots: 9
        },
        {
          id: '2024-07-29',
          label: '29 juillet â 3 aoÃ»t',
          summary: 'Toulouse â¢ Landes Girondines â¢ Cabourg',
          spots: 8
        },
        {
          id: '2024-08-05',
          label: '5 â 10 aoÃ»t',
          summary: 'Aix-en-Provence â¢ Landes Girondines â¢ Cabourg',
          spots: 6
        },
        {
          id: '2024-08-12',
          label: '12 â 17 aoÃ»t',
          summary: 'Poitiers â¢ Cabourg',
          spots: 6
        }
      ];

      const stageCatalog = [
        {
          id: 'performance-poitiers',
          category: 'Performance',
          title: 'Stage Performance Intensif',
          location: 'CREPS de Poitiers',
          description:
            "Volume dâentraÃ®nement Ã©levÃ©, coaching tactique personnalisÃ© et suivi vidÃ©o quotidien pour progresser rapidement.",
          price: 790,
          lodgingPrice: 420,
          transportPrice: 140,
          tags: ['Suivi vidÃ©o', 'PrÃ©pa physique', 'Coaching tactique'],
          weeks: ['2024-07-08', '2024-07-15', '2024-07-22']
        },
        {
          id: 'elite-toulouse',
          category: 'Haut niveau',
          title: 'TournÃ©e Elite & Tournois',
          location: 'CREPS de Toulouse',
          description:
            'Encadrement national, participation Ã  deux tournois officiels et suivi mental quotidien pour les compÃ©titeurs.',
          price: 980,
          lodgingPrice: 520,
          transportPrice: 180,
          tags: ['Tournois FFT', 'Suivi mental', 'Analyse biomÃ©canique'],
          weeks: ['2024-07-08', '2024-07-22', '2024-07-29']
        },
        {
          id: 'terre-battue-aix',
          category: 'Technique',
          title: 'Immersion Terre Battue',
          location: "CREPS d'Aix-en-Provence",
          description:
            'Focus tactique sur terre battue, ateliers spÃ©cifiques et plan de jeu personnalisÃ© avec sessions vidÃ©o.',
          price: 860,
          lodgingPrice: 480,
          transportPrice: 150,
          tags: ['Terre battue', 'Plan tactique', 'PrÃ©pa physique'],
          weeks: ['2024-07-08', '2024-07-22', '2024-08-05']
        },
        {
          id: 'famille-landes',
          category: 'Familles',
          title: 'ExpÃ©rience Premium Famille',
          location: 'Domaine des Landes Girondines',
          description:
            'Programme parents & enfants, coaching partagÃ© et activitÃ©s plage au cÅur de la pinÃ¨de girondine.',
          price: 720,
          lodgingPrice: 540,
          transportPrice: 140,
          tags: ['RÃ©sidence 4â', 'Coaching parents', 'ActivitÃ©s plage'],
          weeks: ['2024-07-15', '2024-07-29', '2024-08-05']
        },
        {
          id: 'cabourg-competition',
          category: 'CompÃ©tition',
          title: 'Stage Bord de Mer & Tournoi',
          location: 'Cabourg',
          description:
            'Coaching quotidien, tournoi nocturne et prÃ©paration physique sur la plage avec accÃ¨s au centre thalasso.',
          price: 820,
          lodgingPrice: 450,
          transportPrice: 130,
          tags: ['Tournoi nocturne', 'PrÃ©pa plage', 'Coaching perso'],
          weeks: ['2024-07-15', '2024-07-29', '2024-08-05', '2024-08-12']
        }
      ];

      const nav = document.querySelector('[data-nav]');
      const navToggle = document.querySelector('[data-nav-toggle]');
      const cartOpenButtons = document.querySelectorAll('[data-cart-open]');
      const cartCloseButtons = document.querySelectorAll('[data-cart-close]');
      const cartModal = document.querySelector('[data-cart-modal]');
      const bookingModal = document.querySelector('[data-booking-modal]');
      const modalCloseButtons = document.querySelectorAll('[data-modal-close]');
      const calendarGrid = document.getElementById('calendarGrid');
      const calendarSummary = document.getElementById('calendarSummary');
      const stageGrid = document.getElementById('stageGrid');
      const stageHint = document.getElementById('stageHint');
      const bookingForm = document.querySelector('[data-booking-form]');
      const bookingStageId = document.getElementById('bookingStageId');
      const bookingTitle = document.getElementById('bookingTitle');
      const bookingLocation = document.getElementById('bookingLocation');
      const bookingWeekSelect = document.getElementById('bookingWeek');
      const bookingParticipants = document.getElementById('bookingParticipants');
      const bookingLodging = document.getElementById('bookingLodging');
      const bookingTransport = document.getElementById('bookingTransport');
      const bookingNotes = document.getElementById('bookingNotes');
      const cartList = document.querySelector('[data-cart-list]');
      const cartForm = document.querySelector('[data-cart-form]');
      const cartCount = document.querySelector('[data-cart-count]');
      const toast = document.getElementById('reservationToast');
      const scrollButtons = document.querySelectorAll('[data-scroll-to]');

      let selectedWeekId = weeks[0]?.id ?? null;
      let cart = [];
      let toastTimeout;

      const formatCurrency = (value) =>
        new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 }).format(value);

      const toggleNav = () => {
        nav.classList.toggle('is-open');
      };

      navToggle?.addEventListener('click', toggleNav);
      nav?.querySelectorAll('a').forEach((link) =>
        link.addEventListener('click', () => {
          nav.classList.remove('is-open');
        })
      );

      scrollButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const selector = button.getAttribute('data-scroll-to');
          const target = document.querySelector(selector);
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' });
          }
        });
      });

      const showToast = (message) => {
        toast.textContent = message;
        toast.classList.add('is-visible');
        clearTimeout(toastTimeout);
        toastTimeout = setTimeout(() => toast.classList.remove('is-visible'), 3800);
      };

      const openModal = (modal) => {
        modal.classList.add('is-visible');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      };

      const closeModal = (modal) => {
        modal.classList.remove('is-visible');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      };

      const openCart = () => openModal(cartModal);
      const closeCart = () => closeModal(cartModal);

      cartOpenButtons.forEach((button) => button.addEventListener('click', openCart));
      cartCloseButtons.forEach((button) => button.addEventListener('click', closeCart));

      modalCloseButtons.forEach((button) =>
        button.addEventListener('click', () => {
          closeModal(bookingModal);
        })
      );

      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          closeModal(bookingModal);
          closeCart();
        }
      });

      const renderCalendar = () => {
        calendarGrid.innerHTML = weeks
          .map((week) => {
            const isActive = week.id === selectedWeekId;
            return `
              <button class="calendar-week${isActive ? ' is-active' : ''}" type="button" data-week="${week.id}" aria-pressed="${
              isActive ? 'true' : 'false'
            }">
                <span class="calendar-week__label">${week.label}</span>
                <span class="calendar-week__locations">${week.summary}</span>
                <span class="calendar-week__status">${
                  week.spots > 0 ? `${week.spots} places restantes` : 'Complet'
                }</span>
              </button>
            `;
          })
          .join('');

        calendarGrid.querySelectorAll('button').forEach((button) => {
          button.addEventListener('click', () => {
            selectedWeekId = button.getAttribute('data-week');
            renderCalendar();
            renderStageCards();
            renderCalendarSummary();
            stageHint.textContent = 'Choisissez votre stage parmi la sÃ©lection ci-dessous.';
          });
        });
      };

      const renderCalendarSummary = () => {
        const week = weeks.find((item) => item.id === selectedWeekId);
        if (!week) {
          calendarSummary.innerHTML = '';
          return;
        }

        const weekStages = stageCatalog.filter((stage) => stage.weeks.includes(week.id));
        const stageList = weekStages.length
          ? `<ul class="calendar-summary__list">
              ${weekStages
                .map((stage) => `<li><strong>${stage.title}</strong> â ${stage.location} â¢ ${formatCurrency(stage.price)}</li>`)
                .join('')}
            </ul>`
          : '<p class="calendar-summary__empty">Aucun stage nâest disponible sur cette semaine.</p>';

        calendarSummary.innerHTML = `
          <div class="calendar-summary__card">
            <strong>Semaine sÃ©lectionnÃ©e</strong>
            <span>${week.label}</span>
            <span>${week.summary}</span>
            <span>${week.spots > 0 ? `${week.spots} places restantes` : 'Complet'}</span>
          </div>
          <div class="calendar-summary__card">
            <strong>Stages proposÃ©s</strong>
            ${stageList}
          </div>
        `;
      };

      const renderStageCards = () => {
        const week = weeks.find((item) => item.id === selectedWeekId);
        if (!week) {
          stageGrid.innerHTML = '';
          return;
        }

        const stages = stageCatalog.filter((stage) => stage.weeks.includes(week.id));

        if (!stages.length) {
          stageGrid.innerHTML = '<p class="calendar-summary__empty">Pas de stage pour cette semaine pour le moment.</p>';
          if (stageHint) {
            stageHint.textContent = `Aucun stage nâest disponible pour ${week.label}. SÃ©lectionnez une autre semaine pour remplir votre panier.`;
          }
          return;
        }

        stageGrid.innerHTML = stages
          .map((stage) => {
            const existingItems = cart.filter((item) => item.stageId === stage.id && item.weekId === selectedWeekId);
            const isSelected = existingItems.length > 0;
            const participantCount = existingItems.reduce((sum, item) => sum + (item.participants || 1), 0);
            const reservationCount = existingItems.length;
            const statusMessage = isSelected
              ? `DÃ©jÃ  ${participantCount} participant${participantCount > 1 ? 's' : ''} (${reservationCount} rÃ©servation${
                  reservationCount > 1 ? 's' : ''
                }) dans votre panier.`
              : '';
            const actionButton = isSelected
              ? '<button class="btn-secondary" type="button" data-cart-open>Voir mon panier</button>'
              : `<button class="btn-primary" type="button" data-book-stage="${stage.id}">RÃ©server</button>`;

            return `
              <article class="stage-card${isSelected ? ' is-selected' : ''}">
                <div class="stage-card__header">
                  <span class="stage-card__category">${stage.category}</span>
                  <h3 class="stage-card__title">${stage.title}</h3>
                </div>
                <p class="stage-card__location">${stage.location}</p>
                <p class="stage-card__description">${stage.description}</p>
                <div class="stage-card__tags">
                  ${stage.tags.map((tag) => `<span class="stage-card__tag">${tag}</span>`).join('')}
                </div>
                ${isSelected ? `<div class="stage-card__status">${statusMessage}</div>` : ''}
                <div class="stage-card__footer">
                  <span class="stage-card__price">${formatCurrency(stage.price)}</span>
                  <div class="stage-card__weeks">
                    ${stage.weeks
                      .map((weekId) => {
                        const label = weeks.find((w) => w.id === weekId)?.label ?? '';
                        return `<span${weekId === selectedWeekId ? ' style="color: var(--reservation-highlight-strong); font-weight: 600;"' : ''}>${label}</span>`;
                      })
                      .join('')}
                  </div>
                  ${actionButton}
                </div>
              </article>
            `;
          })
          .join('');

        stageGrid.querySelectorAll('[data-book-stage]').forEach((button) => {
          button.addEventListener('click', () => openBookingModal(button.getAttribute('data-book-stage')));
        });

        stageGrid.querySelectorAll('[data-cart-open]').forEach((button) => {
          button.addEventListener('click', openCart);
        });

        if (stageHint) {
          const weekItems = cart.filter((item) => item.weekId === selectedWeekId);
          stageHint.textContent = weekItems.length
            ? `Votre panier intelligent contient ${weekItems.length} stage${weekItems.length > 1 ? 's' : ''} pour ${week.label}. Ajustez vos options ou finalisez votre demande.`
            : `Choisissez votre stage pour ${week.label} et personnalisez vos options.`;
        }
      };

      const updateCartCount = () => {
        cartCount.textContent = cart.length;
      };

      const calculateCartItemTotal = (item) => {
        const stage = stageCatalog.find((stageItem) => stageItem.id === item.stageId);
        if (!stage) return 0;
        const base = stage.price * item.participants;
        const lodging = item.lodging ? stage.lodgingPrice * item.participants : 0;
        const transport = item.transport ? stage.transportPrice * item.participants : 0;
        return base + lodging + transport;
      };

      const renderCart = () => {
        if (!cart.length) {
          cartList.innerHTML = '<p class="cart-empty">Votre panier est vide. Ajoutez un stage pour commencer.</p>';
          updateCartCount();
          renderStageCards();
          return;
        }

        const items = cart
          .map((item, index) => {
            const stage = stageCatalog.find((stageItem) => stageItem.id === item.stageId);
            const weekLabel = weeks.find((w) => w.id === item.weekId)?.label ?? '';
            const itemTotal = calculateCartItemTotal(item);
            return `
              <div class="cart-item">
                <div class="cart-item__top">
                  <div>
                    <div class="cart-item__title">${stage?.title ?? 'Stage'}</div>
                    <div class="cart-item__meta">${weekLabel} â¢ ${stage?.location ?? ''}</div>
                    <div class="cart-item__meta">${item.participants} participant${item.participants > 1 ? 's' : ''}</div>
                  </div>
                  <strong>${formatCurrency(itemTotal)}</strong>
                </div>
                <div class="cart-item__actions">
                  <div class="cart-item__meta">
                    ${item.lodging ? 'HÃ©bergement inclus' : 'Sans hÃ©bergement'} â¢ ${
              item.transport ? 'Transport inclus' : 'Sans transport'
            }
                  </div>
                  <button class="cart-item__remove" type="button" data-remove-item="${index}">Retirer</button>
                </div>
                ${item.notes ? `<p class="cart-item__meta">Notes : ${item.notes}</p>` : ''}
              </div>
            `;
          })
          .join('');

        const total = cart.reduce((sum, item) => sum + calculateCartItemTotal(item), 0);

        cartList.innerHTML = `${items}<div class="cart-total">Total panier : ${formatCurrency(total)}</div>`;
        updateCartCount();
        renderStageCards();

        cartList.querySelectorAll('[data-remove-item]').forEach((button) => {
          button.addEventListener('click', () => {
            const index = Number(button.getAttribute('data-remove-item'));
            cart.splice(index, 1);
            renderCart();
            showToast('Stage retirÃ© du panier.');
          });
        });
      };

      const openBookingModal = (stageId) => {
        const stage = stageCatalog.find((item) => item.id === stageId);
        if (!stage) return;

        bookingStageId.value = stage.id;
        bookingTitle.textContent = stage.title;
        bookingLocation.textContent = stage.location;
        bookingParticipants.value = 1;
        bookingLodging.checked = false;
        bookingTransport.checked = false;
        bookingNotes.value = '';

        bookingWeekSelect.innerHTML = stage.weeks
          .map((weekId) => {
            const week = weeks.find((item) => item.id === weekId);
            const selected = weekId === selectedWeekId ? 'selected' : '';
            return `<option value="${weekId}" ${selected}>${week?.label ?? ''}</option>`;
          })
          .join('');

        openModal(bookingModal);
        bookingWeekSelect.focus();
      };

      bookingForm.addEventListener('submit', (event) => {
        event.preventDefault();
        const stageId = bookingStageId.value;
        const weekId = bookingWeekSelect.value;
        const participants = Number(bookingParticipants.value) || 1;
        const lodging = bookingLodging.checked;
        const transport = bookingTransport.checked;
        const notes = bookingNotes.value.trim();

        if (!stageId || !weekId) {
          showToast('Veuillez sÃ©lectionner une semaine.');
          return;
        }

        cart.push({ stageId, weekId, participants, lodging, transport, notes });
        renderCart();
        showToast('Stage ajoutÃ© Ã  votre panier.');
        closeModal(bookingModal);
        openCart();
      });

      cartForm.addEventListener('submit', (event) => {
        event.preventDefault();
        if (!cart.length) {
          showToast('Ajoutez un stage avant dâenvoyer votre demande.');
          return;
        }

        cartForm.reset();
        cart = [];
        renderCart();
        closeCart();
        showToast('Votre demande de rÃ©servation a Ã©tÃ© transmise.');
      });

      renderCalendar();
      renderCalendarSummary();
      renderStageCards();
      renderCart();
    </script>
  </body>
</html>
